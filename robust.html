<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robust - WCAG Testing</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <a href="#main" class="visually-hidden">Skip to main content</a>
    
    <header>
        <div class="logo-container">
            <img src="images/logo.png" alt="WCAG Testing Logo" width="50" height="50">
            <h1>Principle 4: Robust</h1>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="perceivable.html">Perceivable</a></li>
                <li><a href="operable.html">Operable</a></li>
                <li><a href="understandable.html">Understandable</a></li>
                <li><a href="robust.html" aria-current="page">Robust</a></li>
                <li><a href="complex-scenarios.html">Complex Scenarios</a></li>
            </ul>
        </nav>
    </header>

    <main id="main">
        <section>
            <h2>4.1.2 Name, Role, Value</h2>
            <div class="test-area">
                <!-- Issue: Custom button without proper ARIA -->
                <div onclick="alert('Custom button')" style="cursor: pointer; padding: 10px; background: #f0f0f0; border: 1px solid #ccc;">
                    Custom Button (missing role)
                </div>
                
                <!-- Issue: Checkbox simulation without proper attributes -->
                <div class="fake-checkbox" onclick="toggleCheck(this)" style="cursor: pointer;">
                    <span style="border: 1px solid #000; width: 15px; height: 15px; display: inline-block;"></span>
                    <span>Fake checkbox</span>
                </div>
                
                <!-- Issue: Interactive element without accessible name -->
                <button></button>
                
                <!-- Issue: Custom dropdown without ARIA -->
                <div class="custom-dropdown">
                    <div class="dropdown-trigger" onclick="toggleDropdown(this)" style="cursor: pointer; border: 1px solid #ccc; padding: 5px;">
                        Select an option ▼
                    </div>
                    <div class="dropdown-menu" style="display: none; border: 1px solid #ccc; background: white;">
                        <div onclick="selectOption(this)" style="cursor: pointer; padding: 5px;">Option 1</div>
                        <div onclick="selectOption(this)" style="cursor: pointer; padding: 5px;">Option 2</div>
                        <div onclick="selectOption(this)" style="cursor: pointer; padding: 5px;">Option 3</div>
                    </div>
                </div>
                
                <!-- Issue: Range slider without value communication -->
                <div style="margin-top: 20px;">
                    <label>Volume:</label>
                    <div class="custom-slider" style="width: 200px; height: 20px; background: #ddd; position: relative;">
                        <div class="slider-thumb" style="width: 20px; height: 20px; background: #333; position: absolute; cursor: pointer;"></div>
                    </div>
                </div>
                
                <!-- Correct: Proper ARIA attributes -->
                <div style="margin-top: 30px;">
                    <h4>Correct Examples:</h4>
                    
                    <div role="button" tabindex="0" onclick="alert('Proper button')" onkeypress="if(event.key==='Enter')alert('Proper button')"
                         style="cursor: pointer; padding: 10px; background: #f0f0f0; border: 1px solid #ccc;">
                        Custom Button (with proper role)
                    </div>
                    
                    <div role="checkbox" aria-checked="false" tabindex="0" onclick="toggleProperCheck(this)"
                         style="cursor: pointer; margin-top: 10px;">
                        <span aria-hidden="true">☐</span> Proper checkbox simulation
                    </div>
                    
                    <button aria-label="Close dialog">×</button>
                </div>
            </div>
        </section>

        <section>
            <h2>4.1.3 Status Messages</h2>
            <div class="test-area">
                <!-- Issue: Status messages not announced -->
                <div>
                    <button onclick="updateStatusBad()">Save (bad status)</button>
                    <div id="badStatus" style="margin-top: 10px;"></div>
                </div>
                
                <!-- Issue: Error messages not in live region -->
                <form style="margin-top: 20px;">
                    <input type="email" id="emailField" onblur="validateEmail(this)">
                    <div id="emailError" style="color: red; margin-top: 5px;"></div>
                </form>
                
                <!-- Issue: Loading state not communicated -->
                <div style="margin-top: 20px;">
                    <button onclick="startLoading()">Load Data</button>
                    <div id="loadingIndicator" style="display: none;">Loading...</div>
                </div>
                
                <!-- Correct: Proper live regions -->
                <div style="margin-top: 30px;">
                    <h4>Correct Examples:</h4>
                    
                    <button onclick="updateStatusGood()">Save (good status)</button>
                    <div id="goodStatus" aria-live="polite" role="status"></div>
                    
                    <form style="margin-top: 20px;">
                        <input type="email" id="emailField2" onblur="validateEmailGood(this)">
                        <div id="emailError2" aria-live="assertive" role="alert" style="color: red; margin-top: 5px;"></div>
                    </form>
                    
                    <button onclick="startLoadingGood()">Load Data (accessible)</button>
                    <div id="loadingStatus" aria-live="polite" role="status"></div>
                </div>
            </div>
        </section>

        <section>
            <h2>Additional Robustness Issues</h2>
            <div class="test-area">
                <!-- Issue: Invalid HTML nesting -->
                <p>
                    This paragraph contains 
                    <div>a div inside a paragraph (invalid nesting)</div>
                    which breaks HTML validity.
                </p>
                
                <!-- Issue: Missing required attributes -->
                <img src="images/test.jpg">
                <form>
                    <input type="text">
                    <input type="radio" name="group">
                    <input type="radio" name="group">
                </form>
                
                <!-- Issue: Duplicate IDs -->
                <input type="text" id="duplicateId" placeholder="First input">
                <input type="text" id="duplicateId" placeholder="Second input with same ID">
                
                <!-- Issue: Invalid ARIA -->
                <div role="button" aria-pressed="invalid">Invalid ARIA value</div>
                <div aria-labelledby="nonexistent-id">References non-existent ID</div>
                
                <!-- Issue: Custom elements without semantics -->
                <custom-toggle onclick="toggle(this)">Custom Toggle</custom-toggle>
                <my-button>Custom Button Element</my-button>
                
                <!-- Correct: Valid HTML and ARIA -->
                <div style="margin-top: 30px;">
                    <h4>Correct Examples:</h4>
                    
                    <div>
                        <p>Properly nested elements</p>
                        <div>Block-level content in appropriate container</div>
                    </div>
                    
                    <img src="images/test.jpg" alt="Test image">
                    
                    <form>
                        <label for="validInput">Valid Input:</label>
                        <input type="text" id="validInput">
                        
                        <fieldset>
                            <legend>Radio Group:</legend>
                            <label><input type="radio" name="validGroup" value="1"> Option 1</label>
                            <label><input type="radio" name="validGroup" value="2"> Option 2</label>
                        </fieldset>
                    </form>
                    
                    <div role="button" aria-pressed="false" tabindex="0">Valid ARIA button</div>
                </div>
            </div>
        </section>

        <section>
            <h2>Complex Interactive Components</h2>
            <div class="test-area">
                <!-- Issue: Tab panel without proper ARIA -->
                <div class="bad-tabs">
                    <div class="tab-list">
                        <div class="tab active" onclick="showTab(0)">Tab 1</div>
                        <div class="tab" onclick="showTab(1)">Tab 2</div>
                        <div class="tab" onclick="showTab(2)">Tab 3</div>
                    </div>
                    <div class="tab-panels">
                        <div class="tab-panel">Content for tab 1</div>
                        <div class="tab-panel" style="display: none;">Content for tab 2</div>
                        <div class="tab-panel" style="display: none;">Content for tab 3</div>
                    </div>
                </div>
                
                <!-- Issue: Modal dialog without proper focus management -->
                <button onclick="openBadModal()">Open Modal (bad)</button>
                <div id="badModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5);">
                    <div style="margin: 10% auto; padding: 20px; background: white; width: 80%; max-width: 500px;">
                        <h3>Modal Title</h3>
                        <p>Modal content without proper ARIA or focus management</p>
                        <button onclick="closeBadModal()">Close</button>
                    </div>
                </div>
                
                <!-- Correct: Proper ARIA implementation -->
                <div style="margin-top: 30px;">
                    <h4>Correct Tab Implementation:</h4>
                    <div class="good-tabs">
                        <div role="tablist" aria-label="Sample Tabs">
                            <button role="tab" aria-selected="true" aria-controls="panel1" id="tab1" onclick="showGoodTab('panel1', this)">Tab 1</button>
                            <button role="tab" aria-selected="false" aria-controls="panel2" id="tab2" onclick="showGoodTab('panel2', this)">Tab 2</button>
                            <button role="tab" aria-selected="false" aria-controls="panel3" id="tab3" onclick="showGoodTab('panel3', this)">Tab 3</button>
                        </div>
                        <div id="panel1" role="tabpanel" aria-labelledby="tab1">Content for tab 1</div>
                        <div id="panel2" role="tabpanel" aria-labelledby="tab2" style="display: none;">Content for tab 2</div>
                        <div id="panel3" role="tabpanel" aria-labelledby="tab3" style="display: none;">Content for tab 3</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>© 2024 WCAG Testing Playground | Robust Principle Tests</p>
    </footer>

    <script>
        // Bad implementations for testing
        function toggleCheck(element) {
            const checkbox = element.querySelector('span');
            if (checkbox.textContent === '☐') {
                checkbox.textContent = '☑';
            } else {
                checkbox.textContent = '☐';
            }
        }

        function toggleDropdown(trigger) {
            const menu = trigger.nextElementSibling;
            menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
        }

        function selectOption(option) {
            const trigger = option.parentElement.previousElementSibling;
            trigger.textContent = option.textContent + ' ▼';
            option.parentElement.style.display = 'none';
        }

        // Bad status messages
        function updateStatusBad() {
            document.getElementById('badStatus').textContent = 'Saved successfully';
        }

        function validateEmail(input) {
            const errorDiv = document.getElementById('emailError');
            if (!input.value.includes('@')) {
                errorDiv.textContent = 'Please enter a valid email address';
            } else {
                errorDiv.textContent = '';
            }
        }

        function startLoading() {
            document.getElementById('loadingIndicator').style.display = 'block';
            setTimeout(() => {
                document.getElementById('loadingIndicator').style.display = 'none';
            }, 2000);
        }

        // Good implementations
        function toggleProperCheck(element) {
            const isChecked = element.getAttribute('aria-checked') === 'true';
            element.setAttribute('aria-checked', !isChecked);
            const symbol = element.querySelector('span');
            symbol.textContent = isChecked ? '☐' : '☑';
        }

        function updateStatusGood() {
            document.getElementById('goodStatus').textContent = 'Saved successfully';
        }

        function validateEmailGood(input) {
            const errorDiv = document.getElementById('emailError2');
            if (!input.value.includes('@')) {
                errorDiv.textContent = 'Please enter a valid email address';
            } else {
                errorDiv.textContent = '';
            }
        }

        function startLoadingGood() {
            const status = document.getElementById('loadingStatus');
            status.textContent = 'Loading...';
            setTimeout(() => {
                status.textContent = 'Data loaded successfully';
            }, 2000);
        }

        // Tab functions
        function showTab(index) {
            const panels = document.querySelectorAll('.bad-tabs .tab-panel');
            const tabs = document.querySelectorAll('.bad-tabs .tab');
            
            panels.forEach((panel, i) => {
                panel.style.display = i === index ? 'block' : 'none';
            });
            
            tabs.forEach((tab, i) => {
                tab.className = i === index ? 'tab active' : 'tab';
            });
        }

        function showGoodTab(panelId, tab) {
            // Hide all panels
            document.querySelectorAll('.good-tabs [role="tabpanel"]').forEach(panel => {
                panel.style.display = 'none';
            });
            
            // Show selected panel
            document.getElementById(panelId).style.display = 'block';
            
            // Update tab states
            document.querySelectorAll('.good-tabs [role="tab"]').forEach(t => {
                t.setAttribute('aria-selected', 'false');
            });
            tab.setAttribute('aria-selected', 'true');
        }

        // Modal functions
        function openBadModal() {
            document.getElementById('badModal').style.display = 'block';
        }

        function closeBadModal() {
            document.getElementById('badModal').style.display = 'none';
        }
    </script>
    
    <script src="js/scripts.js"></script>
</body>
</html>